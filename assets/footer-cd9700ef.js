import{l as y,a as p}from"./vendor-66af562d.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))l(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const i of n.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&l(i)}).observe(document,{childList:!0,subtree:!0});function o(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerpolicy&&(n.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?n.credentials="include":r.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function l(r){if(r.ep)return;r.ep=!0;const n=o(r);fetch(r.href,n)}})();document.addEventListener("DOMContentLoaded",d);function d(){let e=u.length,t=document.getElementById("cart-count");t&&(t.textContent=e.toString())}const m={cartEmpty:document.querySelector(".js-empty-cart"),cartFull:document.querySelector(".cart-full")},a="cart",u=JSON.parse(localStorage.getItem(a))??[];let f;function q(e,t){console.log("addToCart");const o=b(e.target,t);u.push(o),localStorage.setItem(a,JSON.stringify(u)),console.log(o),d()}function b(e,t){return f=e.dataset._id,t.find(({_id:o})=>o===f)}function F(e,t){try{const o=t.closest(".selectedProduct").dataset.id;if(console.log(`deleted ${o}`),o)for(let l=0;l<e.length;l++)e[l]._id===o&&(e.splice(l,1),localStorage.setItem(a,JSON.stringify(e)),d())}catch(o){console.log(o)}finally{e.length===0&&(localStorage.removeItem(a),m.cartEmpty.style.display="flex",m.cartFull.style.display="none",document.querySelector(".js-cart-numbers").innerHTML=0,document.querySelector("#cart-count").innerHTML=0)}}const I="/Code-for-Food/assets/icons-b8973179.svg";function g(e,t){try{const o=JSON.stringify(t);localStorage.setItem(e,o)}catch(o){console.error("Set state error: ",o.message)}}function S(e){try{const t=localStorage.getItem(e);return t===null?void 0:JSON.parse(t)}catch(t){console.error("Get state error: ",t.message)}}const s={formElem:document.querySelector(".subscription-form"),closeModalSuccessBtn:document.querySelector(".subscription-success-close-button"),closeModalAlreadyBtn:document.querySelector(".subscription-already-close-button"),closeModalFailBtn:document.querySelector(".subscription-fail-close-button"),modal:document.querySelector(".subscription-alert"),subAlready:document.querySelector(".subscription-already-subscribed"),subSuccess:document.querySelector(".subscription-success"),subFail:document.querySelector(".subscription-fail")};s.formElem.addEventListener("submit",v);s.closeModalSuccessBtn.addEventListener("click",c);s.closeModalAlreadyBtn.addEventListener("click",c);s.closeModalFailBtn.addEventListener("click",c);s.formElem.addEventListener("input",y(E,500));function E(e){const o=s.formElem.elements.email.value;g("subscription-form-email",o)}function h(){const e=S("subscription-form-email");s.formElem.elements.email.value=e||""}h();async function v(e){e.preventDefault();const o={email:`${s.formElem.elements.email.value}`};try{const l=await p.post("https://food-boutique.b.goit.study/api/subscription",o);c(),s.subSuccess.style.display="block",s.formElem.reset()}catch(l){l.response&&l.response.status===409?(c(),s.subAlready.style.display="block",s.formElem.reset()):(c(),s.subFail.style.display="block",console.error("Помилка при відправці запиту:",l))}}function c(){s.modal.classList.toggle("is-hidden"),s.subSuccess.style.display="none",s.subAlready.style.display="none",s.subFail.style.display="none"}export{a as K,q as a,u as c,F as d,I as i,S as l,g as s,d as u};
//# sourceMappingURL=footer-cd9700ef.js.map
