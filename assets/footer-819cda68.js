import{l as m,a as f}from"./vendor-4b895a38.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))l(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const i of n.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&l(i)}).observe(document,{childList:!0,subtree:!0});function s(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerpolicy&&(n.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?n.credentials="include":r.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function l(r){if(r.ep)return;r.ep=!0;const n=s(r);fetch(r.href,n)}})();document.addEventListener("DOMContentLoaded",d);function d(){let e=y.length,t=document.getElementById("cart-count");t&&(t.textContent=e.toString())}const u={cartEmpty:document.querySelector(".js-empty-cart"),cartFull:document.querySelector(".cart-full")},a="cart",y=JSON.parse(localStorage.getItem(a))??[];function v(e,t){try{const s=t.closest(".selectedProduct").dataset.id;if(console.log(`deleted ${s}`),s)for(let l=0;l<e.length;l++)e[l]._id===s&&(e.splice(l,1),localStorage.setItem(a,JSON.stringify(e)),d())}catch(s){console.log(s)}finally{e.length===0&&(localStorage.removeItem(a),u.cartEmpty.style.display="flex",u.cartFull.style.display="none",document.querySelector(".js-cart-numbers").innerHTML=0,document.querySelector("#cart-count").innerHTML=0)}}const L="/Code-for-Food/assets/icons-b8973179.svg";function p(e,t){try{const s=JSON.stringify(t);localStorage.setItem(e,s)}catch(s){console.error("Set state error: ",s.message)}}function b(e){try{const t=localStorage.getItem(e);return t===null?void 0:JSON.parse(t)}catch(t){console.error("Get state error: ",t.message)}}const o={formElem:document.querySelector(".subscription-form"),closeModalSuccessBtn:document.querySelector(".subscription-success-close-button"),closeModalAlreadyBtn:document.querySelector(".subscription-already-close-button"),closeModalFailBtn:document.querySelector(".subscription-fail-close-button"),modal:document.querySelector(".subscription-alert"),subAlready:document.querySelector(".subscription-already-subscribed"),subSuccess:document.querySelector(".subscription-success"),subFail:document.querySelector(".subscription-fail")};o.formElem.addEventListener("submit",E);o.closeModalSuccessBtn.addEventListener("click",c);o.closeModalAlreadyBtn.addEventListener("click",c);o.closeModalFailBtn.addEventListener("click",c);o.formElem.addEventListener("input",m(g,500));function g(e){const s=o.formElem.elements.email.value;p("subscription-form-email",s)}function S(){const e=b("subscription-form-email");o.formElem.elements.email.value=e||""}S();async function E(e){e.preventDefault();const s={email:`${o.formElem.elements.email.value}`};try{const l=await f.post("https://food-boutique.b.goit.study/api/subscription",s);c(),o.subSuccess.style.display="block",o.formElem.reset()}catch(l){l.response&&l.response.status===409?(c(),o.subAlready.style.display="block",o.formElem.reset()):(c(),o.subFail.style.display="block",console.error("Помилка при відправці запиту:",l))}}function c(){o.modal.classList.toggle("is-hidden"),o.subSuccess.style.display="none",o.subAlready.style.display="none",o.subFail.style.display="none"}export{a as K,y as c,v as d,L as i,b as l,p as s,d as u};
//# sourceMappingURL=footer-819cda68.js.map
