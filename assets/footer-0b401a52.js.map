{"version":3,"file":"footer-0b401a52.js","sources":["../../src/js/header.js","../../src/js/cart-localestorage.js","../../src/img/icons.svg","../../src/js/filters-localstorage.js","../../src/js/footer.js"],"sourcesContent":["// import axios from 'axios';\nimport { cartArr } from './cart-localestorage';\n\ndocument.addEventListener('DOMContentLoaded', updateCartNumber);\n\nfunction updateCartNumber() {\n    let numberOfItems = cartArr.length;\n    let cartEl = document.getElementById('cart-count');\n    if (cartEl) {\n        cartEl.textContent = numberOfItems.toString();\n    }\n}\n\nexport {updateCartNumber};\n","export { KEY_CART, addToCart, cartArr, deleteFromCart, findProduct }\nimport { updateCartNumber } from './header'\n\nconst refs = {\n  cartEmpty: document.querySelector('.js-empty-cart'),\n  cartFull: document.querySelector('.cart-full')\n}\n\n//Створюємо ключ для localeStorage\nconst KEY_CART = 'cart'\n//Створюємо пустий масив для доданих продуктів або наповнюємо його з localeStorage, якщо там вже щось є\nconst cartArr = JSON.parse(localStorage.getItem(KEY_CART)) ?? []\n//Оголосимо зміну для запису id вибраного продукту\nlet productId\n\n//Функція для додавання товарів в LocaleStorage по кліку на кнопку корзини\nfunction addToCart(evt, arr) {\n  console.log('addToCart')\n  //При кліку на кнопку шукаємо потрібний продукт за id, викликаючи функцію findProduct\n  const product = findProduct(evt.target, arr)\n  cartArr.push(product)\n  localStorage.setItem(KEY_CART, JSON.stringify(cartArr))\n  console.log(product)\n//Функція оновлення кількості товарів у кошику (імпортується)\n  updateCartNumber()\n}\n\n//Функція пошуку необхідного продукту за id в масиві,який надходить з серверу (викликається всередині addToCart)\nfunction findProduct(elem, arr) {\n  productId = elem.dataset._id\n  return arr.find(({ _id }) => _id === productId)\n}\n\n\n\n//Функція для видалення товару з LocaleStorage по кліку на кнопку delete на картці товару\nfunction deleteFromCart(cartArr, btn) {\n  try {\n    const selectedProduct = btn.closest('.selectedProduct').dataset.id\n    console.log(`deleted ${selectedProduct}`)\n    //Перебираємо масив корзини, шукаємо індекс продукту з вибраним id і видаляємо його з масиву за індексом\n    if (selectedProduct) {\n      for (let i = 0; i < cartArr.length; i++) {\n        if (cartArr[i]._id === selectedProduct) {\n          cartArr.splice(i, 1)\n          localStorage.setItem(KEY_CART, JSON.stringify(cartArr))\n          updateCartNumber()\n        }\n      }\n    }\n  } catch (error) {\n    console.log(error)\n  } finally {\n    //Коли в масиві не залишилося обєктів, видаляємо його з сховища \n    if (cartArr.length === 0) {\n      localStorage.removeItem(KEY_CART)\n      refs.cartEmpty.style.display = 'flex'\n      refs.cartFull.style.display = 'none'\n      document.querySelector('.js-cart-numbers').innerHTML = 0\n      document.querySelector('#cart-count').innerHTML = 0\n    }\n  }\n}\n\n\n\n","export default \"__VITE_ASSET__4a8417dd__\"","export function save(key, value) {\n  try {\n    const serializedState = JSON.stringify(value);\n    localStorage.setItem(key, serializedState);\n  } catch (error) {\n    console.error('Set state error: ', error.message);\n  }\n}\n\nexport function load(key) {\n  try {\n    const serializedState = localStorage.getItem(key);\n    return serializedState === null ? undefined : JSON.parse(serializedState);\n  } catch (error) {\n    console.error('Get state error: ', error.message);\n  }\n}\n","import axios from 'axios';\nimport { save, load } from './filters-localstorage';\nimport throttle from 'lodash.throttle';\n\nconst refs = {\n  formElem: document.querySelector('.subscription-form'),\n  closeModalSuccessBtn: document.querySelector(\n    '.subscription-success-close-button'\n  ),\n  closeModalAlreadyBtn: document.querySelector(\n    '.subscription-already-close-button'\n  ),\n  closeModalFailBtn: document.querySelector(\n    '.subscription-fail-close-button'\n  ),\n  modal: document.querySelector('.subscription-alert'),\n  subAlready: document.querySelector('.subscription-already-subscribed'),\n  subSuccess: document.querySelector('.subscription-success'),\n  subFail: document.querySelector('.subscription-fail'),\n};\n\nrefs.formElem.addEventListener('submit', onFormSubmit);\nrefs.closeModalSuccessBtn.addEventListener('click', toggleModal);\nrefs.closeModalAlreadyBtn.addEventListener('click', toggleModal);\nrefs.closeModalFailBtn.addEventListener('click', toggleModal);\nrefs.formElem.addEventListener('input', throttle(onFormInput, 500));\n\nfunction onFormInput(event) {\n  const emailValue = refs.formElem.elements.email.value;\n  const value = emailValue;\n  const key = 'subscription-form-email';\n  save(key, value);\n}\n\nfunction onPageLoad() {\n    const emailValue = load('subscription-form-email');\n    refs.formElem.elements.email.value = emailValue || '';\n}\nonPageLoad();\n\nasync function onFormSubmit(event) {\n    event.preventDefault();\n    \n  const email = refs.formElem.elements.email.value;\n  const newEmail = {\n    email: `${email}`,\n    };\n    \n  try {\n    const response = await axios.post(\n      'https://food-boutique.b.goit.study/api/subscription',\n      newEmail\n    );\n    // Якщо запит успішний, викликаємо toggleModal()\n      toggleModal();\n      refs.subSuccess.style.display = 'block';\n      refs.formElem.reset()\n  } catch (err) {\n    if (err.response && err.response.status === 409) {\n      // Якщо статус 409, викликаємо toggleModal()\n        toggleModal();\n        refs.subAlready.style.display = 'block';\n        refs.formElem.reset();\n    } else {\n      toggleModal();\n      refs.subFail.style.display = 'block';\n      console.error('Помилка при відправці запиту:', err);\n    }\n  }\n}\n\nfunction toggleModal() {\n    refs.modal.classList.toggle(\"is-hidden\");\n    refs.subSuccess.style.display = 'none';\n    refs.subAlready.style.display = 'none';\n    refs.subFail.style.display = 'none';\n  }"],"names":["updateCartNumber","numberOfItems","cartArr","cartEl","refs","KEY_CART","deleteFromCart","btn","selectedProduct","i","error","iconsSvg","save","key","value","serializedState","load","onFormSubmit","toggleModal","throttle","onFormInput","event","onPageLoad","emailValue","newEmail","response","axios","err"],"mappings":"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"}