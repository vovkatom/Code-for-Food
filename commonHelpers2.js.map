{"version":3,"file":"commonHelpers2.js","sources":["../src/js/api.js","../src/js/modalwindow.js","../src/js/pagination.js","../src/js/products.js","../src/js/filters.js","../src/js/search.js","../src/js/popproducts.js","../src/js/discproducts.js","../src/js/scroll.js"],"sourcesContent":["import axios from 'axios';\n\nconst BASE_URL = 'https://food-boutique.b.goit.study/api/';\nconst CATEGORIES_ENDPOINT = 'products/categories';\nconst PRODUCTS_ENDPOINT = 'products';\nconst PRODUCT_ENDPOINT = 'products/';\nconst POPULAR_PRODUCTS_ENDPOINT = 'products/popular';\nconst DISCOUNTED_PRODUCTS_ENDPOINT = 'products/discount';\nconst SUBSCRIBE_ENDPOINT = 'subscription';\nconst ORDERS_ENDPOINT = 'orders';\n\nconst api = axios.create({ baseURL: BASE_URL });\n\nexport default class Api {\n  static async getCategories() {\n    const response = await api.get(CATEGORIES_ENDPOINT);\n\n    return response.data;\n  }\n\n  static async getProducts({ keyword, category, page, limit, sortBy } = {}) {\n    const response = await api.get(PRODUCTS_ENDPOINT, {\n      params: {\n        keyword,\n        category,\n        page,\n        limit,\n        [sortBy?.key]: sortBy?.value,\n      },\n    });\n\n    return response.data;\n  }\n\n  static async getProduct(id) {\n    const response = await api.get(PRODUCT_ENDPOINT + id);\n\n    return response.data;\n  }\n\n  static async getPopularProducts(limit = 5) {\n    const response = await api.get(POPULAR_PRODUCTS_ENDPOINT, {\n      params: { limit },\n    });\n\n    return response.data;\n  }\n\n  static async getDiscountedProducts() {\n    const response = await api.get(DISCOUNTED_PRODUCTS_ENDPOINT);\n\n    return response.data;\n  }\n\n  static async subscribe(email) {\n    const response = await api.post(SUBSCRIBE_ENDPOINT, { email });\n    return response.data;\n  }\n\n  static async placeOrder(cart) {\n    const { email, products } = cart;\n    const response = await api.post(ORDERS_ENDPOINT, {\n      email,\n      products: products.map(({ productId, amount }) => ({\n        productId,\n        amount,\n      })),\n    });\n\n    return response.data;\n  }\n}\n","export { openModalProduct }\nimport {\n  KEY_CART,\n  cartArr,\n  addToCart,\n  findProduct,\n} from '/js/cart-localestorage';\nimport { updateCartNumber } from './header';\nimport iconSvg from '/img/icons.svg';\n\nimport Api from './api'; // Модуль API\nimport icons from '/img/icons.svg'; // Іконки для відображення\n\n// Вибір DOM елементів\nconst modalBackground = document.querySelector('.modal-background'); // Фон модального вікна\nconst modal = document.querySelector('.modal'); // Саме модальне вікно\n\n// Оголошення функції для відкриття модального вікна з деталями продукту\nexport default async function openModalProduct(productId) {\n  const idP = productId;\n  try {\n    // Показ модального вікна\n    modalBackground.classList.remove('is-hidden'); // Видалення класу для відображення фону\n    document.body.classList.add('is-modal-open'); // Додавання класу для позначення відкриття модального вікна\n\n    // Додавання іконки закриття до модального вікна\n    modal.innerHTML = `\n      <button type=\"button\" class=\"modal-close-btn\" aria-label=\"modal close\">\n        <svg class=\"modal-icon-close\" width=\"22\" height=\"22\">\n          <use href=\"${icons}#icon-x-close\"></use>\n        </svg>\n      </button>\n    `;\n\n    // Отримання даних про продукт з API\n    const modalProduct = await Api.getProduct(productId);\n    modal.insertAdjacentHTML('beforeend', renderModalCard(modalProduct));\n\n    document.querySelector('.modal-btn').addEventListener('click', () => {\n      addCart(modalProduct); // Передача об'єкту modalProduct у функцію addCart\n    });\n      document.querySelector('.modal-btn-remove').addEventListener('click', () => {\n        removeCart(modalProduct); // Передача об'єкту modalProduct у функцію addCart\n      });\n\n    \n    \n    for (let i = 0; i < cartArr.length; i++) {\n      if (cartArr[i]._id === productId) {\n        document.querySelector('.modal-btn').style.display = 'none';\n        document.querySelector('.modal-btn-remove').style.display = 'block';\n      }\n    }\n\n\n    document\n      .querySelector('.modal-close-btn')\n      .addEventListener('click', closeModalHandler);\n    modalBackground.addEventListener('click', clickOnBackdrop);\n    document.addEventListener('keydown', escapeModalHandler);\n\n  } catch (error) {\n    console.error('Error fetching product data:', error.message);\n  } finally {\n  }\n}\n\nfunction renderModalCard({\n  img,\n  name,\n  category,\n  size,\n  popularity,\n  desc,\n  price,\n}) {\n  return `\n    <div class=\"modal-container\">\n      <div>\n        <div class=\"modal-img\">\n          <img\n            src=\"${img}\"\n            alt=\"${name}\"\n          />\n        </div>\n      </div>\n      <div class=\"modal-product-info\">\n        <h2 class=\"modal-title\">${name}</h2>\n        <div class=\"modal-details\">\n          <div>\n            <span class=\"modal-subtitle\">Category:</span>\n            <span class=\"modal-subtitle-info\">\n              ${category.replaceAll('_', ' ')}\n            </span>\n          </div>\n          <div>\n            <span class=\"modal-subtitle\">Size:</span>\n            <span class=\"modal-subtitle-info\">${size}</span>\n          </div>\n          <div>\n            <span class=\"modal-subtitle\">Popularity:</span>\n            <span class=\"modal-subtitle-info\">${popularity}</span>\n          </div>\n        </div>\n        <p class=\"modal-about-product\">${desc}</p>\n      </div>\n    </div>\n    <div class=\"modal-price-container\">\n      <p class=\"modal-price-product\">\n        <span>$</span><span class=\"modal-price\">${price}</span>\n      </p>\n      \n      <div class=\"quantity-and-add\">\n      <button class=\"modal-btn\" aria-label=\"add to card\">\n      <span class=\"modal-btn-text\">Add to</span>\n      <svg class=\"modal-icon-shop\" width=\"18\" height=\"18\">\n        <use href=\"${icons}#icon-shopping-cart\"></use>\n      </svg>\n    </button>\n    <button class=\"modal-btn-remove\" aria-label=\"add to card\">\n      <span class=\"modal-btn-text\">Remove from</span>\n      <svg class=\"modal-icon-shop\" width=\"18\" height=\"18\">\n        <use href=\"${icons}#icon-shopping-cart\"></use>\n      </svg>\n    </button>\n      </div>\n    </div>`;\n}\n\nlet productsArray = []; // Ініціалізація порожнього масиву для продуктів\n\nfunction addCart(product) {\n      cartArr.push(product);\n      localStorage.setItem(KEY_CART, JSON.stringify(cartArr));\n      //Функція оновлення кількості товарів у кошику (імпортується)\n  updateCartNumber();\n  document.querySelector('.modal-btn').style.display = 'none'\n  document.querySelector('.modal-btn-remove').style.display = 'block';\n  addCartSyncButtons(product);\n}\n\nfunction removeCart(product) {\n  // console.log(cartArr);\n  // console.log(product)\n  // console.log('Removing')\n  for (let i = 0; i < cartArr.length; i++) {\n    if (cartArr[i]._id === product._id) {\n      cartArr.splice(i, 1);\n      localStorage.setItem(KEY_CART, JSON.stringify(cartArr));\n      updateCartNumber();\n      document.querySelector('.modal-btn').style.display = 'block';\n      document.querySelector('.modal-btn-remove').style.display = 'none';\n      \n    }\n  }\n  removeCartSyncButtons(product);\n}\n\nfunction addCartSyncButtons(id) {\n  const idPorduct = id._id\n  const allPopular = document.querySelectorAll('.popular-list .item-popular');\n  const allDiscount = document.querySelectorAll(\n    '.discount-list .discount-item'\n  );\n  const allProducts = document.querySelectorAll('.products .item-pl');\n  allPopular.forEach(elem => {\n    if (elem.dataset.id === idPorduct) {\n      const btn = elem.querySelector('.popularBtn');\n      const svg = btn.querySelector('.icon-popular use');\n      svg.setAttribute('href', `${iconSvg}#icon-cart`);\n      btn.setAttribute('disabled', true);\n    }\n  });\n  allDiscount.forEach(elem => {\n    if (elem.dataset.id === idPorduct) {\n      const btn = elem.querySelector('.info-div .info-title-link');\n      const svg = btn.querySelector('.img-svg-osnova use');\n      svg.setAttribute('href', `${iconSvg}#icon-cart`);\n      btn.setAttribute('disabled', true);\n    }\n  });\n  allProducts.forEach(elem => {\n    if (elem.dataset.id === idPorduct) {\n      const btn = elem.querySelector('.price-container-pl .btn-pl');\n      const svg = btn.querySelector('.icon-pl use');\n      svg.setAttribute('href', `${iconSvg}#icon-cart`);\n      btn.setAttribute('disabled', true);\n    }\n  });\n}\n\nfunction removeCartSyncButtons(id) {\n  const idPorduct = id._id;\n  const allPopular = document.querySelectorAll('.popular-list .item-popular');\n  const allDiscount = document.querySelectorAll(\n    '.discount-list .discount-item'\n  );\n  const allProducts = document.querySelectorAll('.products .item-pl');\n  allPopular.forEach(elem => {\n    if (elem.dataset.id === idPorduct) {\n      const btn = elem.querySelector('.popularBtn');\n      const svg = btn.querySelector('.icon-popular use');\n      svg.setAttribute('href', `${iconSvg}#icon-shopping-cart`);\n      btn.removeAttribute('disabled');\n    }\n  });\n  allDiscount.forEach(elem => {\n    if (elem.dataset.id === idPorduct) {\n      const btn = elem.querySelector('.info-div .info-title-link');\n      const svg = btn.querySelector('.img-svg-osnova use');\n      svg.setAttribute('href', `${iconSvg}#icon-shopping-cart`);\n      btn.removeAttribute('disabled');\n    }\n  });\n  allProducts.forEach(elem => {\n    if (elem.dataset.id === idPorduct) {\n      const btn = elem.querySelector('.price-container-pl .btn-pl');\n      const svg = btn.querySelector('.icon-pl use');\n      svg.setAttribute('href', `${iconSvg}#icon-shopping-cart`);\n      btn.removeAttribute('disabled');\n    }\n  });\n}\n\n\n\nfunction clickOnBackdrop({ target }) {\n  if (target === modalBackground) {\n    closeModalHandler();\n  }\n}\n\nfunction closeModalHandler() {\n  const modalContainer = document.querySelector('.modal-container');\n\n  // Додаємо клас для виклику анімації закриття\n  modalContainer.classList.add('modal-closing');\n\n  // Затримка, щоб анімація могла відтворитися перед закриттям модального вікна\n  setTimeout(() => {\n    modalBackground.classList.add('is-hidden');\n    document.body.classList.remove('is-modal-open');\n    modalContainer.classList.remove('modal-closing');\n  }, 500);\n\n  document\n    .querySelector('.modal-close-btn')\n    .removeEventListener('click', closeModalHandler);\n  modalBackground.removeEventListener('click', clickOnBackdrop);\n  document.removeEventListener('keydown', escapeModalHandler);\n}\n\nfunction escapeModalHandler({ key }) {\n  if (key === 'Escape') {\n    closeModalHandler();\n  }\n}","import 'tui-pagination/dist/tui-pagination.css';\nimport Pagination from 'tui-pagination';\nimport { fetchAndRender, fetchFoodCategory } from '/js/products.js';\n\nexport { funcPagination, loadMoreTrendMoves, pages };\n\nconst FILTER = 'filter';\n\nconst refs = {\n  paginationDop: document.querySelector('.paginationDop'),\n  pagination: document.querySelector('.tui-pagination'),\n  list: document.querySelector('.product-list'),\n  // select: document.querySelector('.select'),\n  search: document.querySelector('#search'),\n};\n\nconst container = document.getElementById('pagination');\n\nlet totalPage;\nlet itemsPerPage;\nlet visiblePage = 3;\nlet pageOrigin;\n\n//вытягивает с localStorage номер страницы - если была перегрузка страницы, то нужно вятянуть номер который был до перегрузки и\n//  активировать пагинацию на этой же страничке\nfunction storeData() {\n  const storedData = localStorage.getItem(FILTER);\n  if (storedData) {\n    try {\n      const parsedData = JSON.parse(storedData);\n      pageOrigin = parsedData.page;\n      itemsPerPage = parsedData.limit;\n    } catch (error) {\n      console.error('Error updating localStorage:', error);\n    }\n  }\n\n  // funcPagination(totalPage);\n}\n\n//создание пагинации\nfunction funcPagination(totalPage) {\n  // console.log(totalPage);\n  let options = {\n    totalItems: totalPage,\n    itemsPerPage: itemsPerPage,\n    visiblePages: visiblePage,\n    page: pageOrigin,\n    centerAlign: true,\n    firstItemClassName: 'tui-first-child',\n    lastItemClassName: 'tui-last-child',\n    template: {\n      page: '<a href=\"#\" class=\"tui-page-btn\">{{page}}</a>',\n      currentPage:\n        '<strong class=\"tui-page-btn tui-is-selected\">{{page}}</strong>',\n      moveButton:\n        '<a href=\"#\" class=\"tui-page-btn tui-{{type}}\">' +\n        '<span class=\"tui-ico-{{type}}\">{{type}}</span>' +\n        '</a>',\n      disabledMoveButton:\n        '<span class=\"tui-page-btn tui-is-disabled tui-{{type}}\">' +\n        '<span class=\"tui-ico-{{type}}\">{{type}}</span>' +\n        '</span>',\n      moreButton:\n        '<a href=\"#\" class=\"tui-page-btn tui-{{type}}-is-ellip\">' +\n        '<span class=\"tui-ico-ellip\">...</span>' +\n        '</a>',\n    },\n  };\n\n  const pagination = new Pagination(container, options);\n  pagination.on('beforeMove', loadMoreTrendMoves);\n}\n\n//в local storage меняем номер странички на выбраный номер в пагинации. Очищяет карточки и заново отрисовывает новые (новая партия)\nfunction loadMoreTrendMoves(event) {\n  const storedData = localStorage.getItem(FILTER);\n  if (storedData) {\n    try {\n      const parsedData = JSON.parse(storedData);\n      parsedData.page = Number(`${event.page}`);\n      localStorage.setItem('filter', JSON.stringify(parsedData));\n    } catch (error) {\n      console.error('Error updating localStorage:', error);\n    }\n  }\n  refs.list.innerHTML = '';\n  fetchAndRender();\n  scroll();\n}\n\n// определяем сколько всего будет товаров и вызываем пагинацию передавая этот параметр\nasync function pages(totalPage) {\n  if (totalPage <= Number(itemsPerPage)) {\n    refs.pagination.classList.replace('tui-pagination', 'paginationDop');\n  } else {\n    storeData();\n    refs.pagination.classList.replace('paginationDop', 'tui-pagination');\n  }\n  if (itemsPerPage === 9 || itemsPerPage === 8) {\n    visiblePage = 4;\n  } else {\n    visiblePage = 2;\n  }\n}\n\n\nfunction scroll() {\n  const view = document.querySelector('.container-pl');\n\n  let rect = view.getBoundingClientRect();\n  let x = rect.left;\n  let y = rect.top;\n  scrollTo(x, y);\n  scrollTo({\n    top: 600,\n    behavior: 'smooth'\n  });\n}\n","import axios from 'axios';\nimport {\n  KEY_CART,\n  cartArr,\n  addToCart,\n  findProduct,\n} from '/js/cart-localestorage';\nimport iconSvg from '/img/icons.svg';\nimport { updateCartNumber } from './header';\nimport { openModalProduct } from '/js/modalwindow';\n\nexport {\n  foodInfo,\n  fetchAndRender,\n  fetchFoodCategory,\n  getCategoriesFromLS,\n  KEY_CATEGORY,\n  renderFoodItems,\n  homManyLimit,\n  handleButtonClick,\n  checkId,\n  add,\n};\n\nimport { funcPagination, loadMoreTrendMoves, pages } from './pagination.js';\n\nconst refs = {\n  list: document.querySelector('.product-list'),\n  pagination: document.querySelector('.tui-pagination'),\n};\n\nlet foodInfo = [];\nlet totalPage;\n\nasync function fetchAndRender() {\n  // Показываем лоадер перед запросом\n  document.getElementById('overlay').style.display = 'flex';\n  setLimit();\n  const categoryInfo = await fetchFoodCategory();\n  totalPage = categoryInfo.data.totalPages * categoryInfo.data.perPage;\n  const limit = homManyLimit();\n  if (totalPage <= Number(limit)) {\n    refs.pagination.classList.replace('tui-pagination', 'paginationDop');\n  }\n  pages(totalPage);\n  funcPagination(totalPage);\n  try {\n    let response;\n    if (categoryInfo) {\n      response = categoryInfo;\n    }\n    foodInfo = response.data.results;\n    renderFoodItems(foodInfo);\n  } catch (error) {\n    console.error(error);\n  } finally {\n    // Скрываем лоадер после выполнения запроса\n    document.getElementById('overlay').style.display = 'none';\n    // openModal()\n  }\n}\n\nfunction renderFoodItems(foodInfo) {\n  const storage = localStorage.getItem(KEY_CART);\n  const createMessage = `<div class=\"error-load\">\n                <h2 class=\"not-found-heading\">Nothing was found for the selected <span\n                        class=\"green-word\">filters...</span>\n                </h2>\n                <p class=\"not-found-message\">Try adjusting your search parameters or browse our range by other criteria\n                    to\n                    find\n                    the perfect\n                    product for\n                    you.</p>\n            </div>`;\n  const createElement = foodInfo\n    .map(\n      ({\n        img,\n        name,\n        popularity,\n        category,\n        price,\n        size,\n        _id,\n        is10PercentOff,\n      }) => {\n        const cleanedCategory = category.replace(/_/g, ' ');\n        const isIDInLocaleStorage = storage ? JSON.parse(storage).some(item => item._id === _id) : false;\n        const svgDisc = is10PercentOff ? 'icon-discount-pl' : 'visually-hidden';\n        const svgHref = isIDInLocaleStorage\n          ? `${iconSvg}#icon-cart`\n          : `${iconSvg}#icon-shopping-cart`;\n\n        return `<li class=\"item-pl\" data-id=\"${_id}\">\n                <div class=\"background-img-pl\">\n                    <img src=\"${img}\" alt=\"\" class=\"img-pl\" loading=\"lazy\" />\n                </div>\n                <h2 class=\"product-name-pl\">${name}</h2>\n                <div class=\"container-info\">\n                <div class=\"product-info-pl\">\n                    <p class=\"paragraph-pl\">\n                        Category: <b class=\"value-pl\">${cleanedCategory}</b>\n                    </p>\n                    <p class=\"paragraph-pl\">Size: <b class=\"value-pl\">${size}</b></p>\n                    <p class=\"paragraph-pl\">Popularity: <b class=\"value-pl\">${popularity}</b></p>\n                </div>\n                <div class=\"price-container-pl\">\n                    <b class=\"price-pl\">$${price}</b>\n                    <button aria-label=\"add basket\" class=\"btn-pl\" ${\n                      isIDInLocaleStorage ? 'disabled' : ''\n                    }>\n                        <svg class=\"icon-pl\">\n                            <use href=\"${svgHref}\"></use>\n                        </svg>\n                    </button>\n                </div>\n                <svg class=\"${svgDisc}\">\n                <use href=\"${iconSvg}#icon-discount\"></use>\n                </svg>\n                </div>\n            </li>`;\n      }\n    )\n    .join('');\n  refs.list.innerHTML = createElement || createMessage;\n}\n\nwindow.addEventListener('load', fetchAndRender);\n\nrefs.list.addEventListener('click', handleButtonClick);\n\nfunction handleButtonClick(event) {\n  // debugger;\n  let noButton = 0;\n  // отримуємо елемент, на якому відбувся клік\n  const clickedElement = event.target;\n  // Знаходимо найближчий батьківський елемнт типу button\n  const closestButton = clickedElement.closest('button');\n  // перевіряємо чи знайдено кнопку\n  if (closestButton) {\n    // Знаходимо найближчий батьківський елемент li\n    const closestLi = closestButton.closest('li');\n    // перевіряємо чи знайдено li\n    if (closestLi) {\n      // отримуємо значення data-id з li\n      const dataId = closestLi.dataset.id;\n      // знаходимо продукт за id в масиві foodInfo\n      const clickedProduct = foodInfo.find(product => product._id === dataId);\n      checkId(closestLi);\n      // перевірка чи знайдено продукт\n      if (clickedProduct) {\n        // виклик функції на додавання в localeStorage\n        noButton = 1;\n        add(clickedProduct, foodInfo);\n      }\n    }\n    // знаходимо елемент use в середині кнопки\n    // const svg = closestButton.querySelector('.icon-pl use');\n    // зміна svg\n    // svg.setAttribute('href', `${iconSvg}#icon-cart`);\n    // btn off\n    closestButton.setAttribute('disabled', true);\n  }\n  const clickedLi = event.target.closest('li');\n  if (clickedLi && !noButton) {\n    const clickedId = clickedLi.dataset.id;\n    openModalProduct(clickedId);\n  }\n}\n\nfunction checkId(id) {\n  const idPorduct = id.dataset.id;\n  const allPopular = document.querySelectorAll('.popular-list .item-popular');\n  const allDiscount = document.querySelectorAll(\n    '.discount-list .discount-item'\n  );\n  const allProducts = document.querySelectorAll('.products .item-pl');\n  allPopular.forEach(elem => {\n\n    if (elem.dataset.id === idPorduct) {\n      const btn = elem.querySelector('.popularBtn');\n      const svg = btn.querySelector('.icon-popular use');\n      svg.setAttribute('href', `${iconSvg}#icon-cart`);\n      btn.setAttribute('disabled', true);\n    }\n  });\n  allDiscount.forEach(elem => {\n    if (elem.dataset.id === idPorduct) {\n      const btn = elem.querySelector('.info-div .info-title-link');\n      const svg = btn.querySelector('.img-svg-osnova use');\n      svg.setAttribute('href', `${iconSvg}#icon-cart`);\n      btn.setAttribute('disabled', true);\n    }\n  });\n  allProducts.forEach(elem => {\n    if (elem.dataset.id === idPorduct) {\n      const btn = elem.querySelector('.price-container-pl .btn-pl');\n      const svg = btn.querySelector('.icon-pl use');\n      svg.setAttribute('href', `${iconSvg}#icon-cart`);\n      btn.setAttribute('disabled', true);\n    }\n  });  \n}\n\nfunction add(elem, arr) {\n  //При кліку на кнопку шукаємо потрібний продукт за id, викликаючи функцію findProduct\n  const product = findP(elem, arr);\n  const foundProduct = cartArr.some(cart => cart._id === product._id);\n  if (foundProduct) {\n    return;\n  } else {\n    cartArr.push(product);\n    localStorage.setItem(KEY_CART, JSON.stringify(cartArr));\n    //team\n    updateCartNumber();\n  }\n}\n\n//Функція пошуку необхідного продукту за id в масиві,який надходить з серверу (викликається всередині addToCart)\nfunction findP(elem, arr) {\n  const productId = elem._id;\n  return arr.find(({ _id }) => _id === productId);\n}\n\n// Фільтр по категоріям\n\nconst KEY_CATEGORY = 'filter';\n\nfunction getCategoriesFromLS() {\n  const storage = localStorage.getItem(KEY_CATEGORY);\n  try {\n    const parseData = JSON.parse(storage);\n\n    const defaultCategories = {\n      // byABC: false,\n      // byPrice: false,\n      // byPopularity: false,\n    };\n\n    const categories = {\n      ...defaultCategories,\n      ...parseData,\n    };\n\n    // Додати перевірку та видалення значень, якщо вони відсутні\n    Object.keys(categories).forEach(key => {\n      if (categories[key] === undefined) {\n        delete categories[key];\n      }\n    });\n\n    return categories;\n  } catch (error) {\n    console.error(error);\n    return null;\n  }\n}\n\nasync function fetchFoodCategory() {\n  // Показываем лоадер перед запросом\n  document.getElementById('overlay').style.display = 'flex';\n\n  const { keyword, category, page, limit, byABC, byPrice, byPopularity } =\n    getCategoriesFromLS();\n\n  const params = {\n    keyword: keyword || '',\n    category: category || '',\n    page: page || 1, // Додавання значення за замовчуванням, якщо воно відсутнє\n    limit: limit || 6, // Додавання значення за замовчуванням, якщо воно відсутнє\n    byABC: byABC || '',\n    byPrice: byPrice || '',\n    byPopularity: byPopularity || '',\n  };\n\n  const queryString = Object.keys(params)\n    .filter(\n      key =>\n        params[key] !== undefined && params[key] !== null && params[key] !== ''\n    )\n    .map(key => `${key}=${params[key]}`)\n    .join('&');\n\n  const url = `https://food-boutique.b.goit.study/api/products?${queryString}`;\n\n  try {\n    const response = await axios.get(url);\n    return response;\n  } catch (error) {\n    console.error(error);\n  } finally {\n    // Скрываем лоадер после выполнения запроса\n    document.getElementById('overlay').style.display = 'none';\n  }\n}\n\nfunction homManyLimit() {\n  let limit;\n  if (window.innerWidth < 1440 && window.innerWidth > 767) {\n    limit = 8;\n  } else if (window.innerWidth < 768) {\n    limit = 6;\n  } else {\n    limit = 9;\n  }\n  return limit;\n}\n\nfunction setLimit() {\n  const limit = homManyLimit();\n  const storedLimit = localStorage.getItem('filter');\n  const parseLimit = JSON.parse(storedLimit);\n  parseLimit.limit = Number(limit);\n  localStorage.setItem('filter', JSON.stringify(parseLimit));\n}\n\nlet currentWindowWidth = window.innerWidth;\nlet resizeTimer;\nconst thresholdWidths = [768, 1440]; // межі при яких буде перемальовка\nwindow.addEventListener('resize', resizeWidth);\n\nfunction resizeWidth() {\n  clearTimeout(resizeTimer);\n  resizeTimer = setTimeout(function () {\n    const newWindowWidth = window.innerWidth;\n    if (thresholdOfSwitches(currentWindowWidth, newWindowWidth)) {\n      currentWindowWidth = newWindowWidth;\n      refs.list.innerHTML = '';\n      fetchAndRender();\n    }\n  }, 250);\n}\n\nfunction thresholdOfSwitches(oldWidth, newWidth) {\n  return (\n    thresholdWidths.some(\n      threshold => oldWidth < threshold && newWidth >= threshold\n    ) ||\n    thresholdWidths.some(\n      threshold => oldWidth >= threshold && newWidth < threshold\n    )\n  );\n}\n\n","import axios from 'axios';\nimport Notiflix from 'notiflix';\n// import 'notiflix/dist/notiflix-aio-3.2.6.min.js';\nimport { save, load } from './filters-localstorage';\nimport {\n  foodInfo,\n  fetchAndRender,\n  fetchFoodCategory,\n  getCategoriesFromLS,\n  KEY_CATEGORY,\n  renderFoodItems,\n  homManyLimit,\n} from './products.js';\nimport {\n  funcPagination, loadMoreTrendMoves, pages\n} from './pagination.js';\nconst BASE_URL = 'https://food-boutique.b.goit.study/api';\n\nfunction fetchCategories() {\n  return axios\n    .get(`${BASE_URL}/products/categories`)\n    .then(({ data }) => data)\n    .catch(error => error);\n}\n\nconst refs = {\n  selector: document.querySelector('.select__body'),\n  currentfilter: document.querySelector('.select__current'),\n  list: document.querySelector('.product-list'),\n  sort: document.querySelector('.sort-body'),\n  currentSort: document.querySelector('.sort-current'),\n  form: document.querySelector('#search'),\n};\n\nfetchCategories()\n  .then(data => {\n    const markup = createSelectorMarkup(data);\n    refs.selector.insertAdjacentHTML('afterbegin', markup);\n    select();\n    //! <<<< local storage >>>>\n    refs.selector.addEventListener('click', handleCategory);\n    //! <<<< local storage >>>>\n  })\n  .catch(error => {\n    Notiflix.Notify.failure(\n      `❌ Oops! Something went wrong! Error ${error} Try reloading the page! ❌`\n    );\n  });\n\nfunction createSelectorMarkup(arr) {\n  return arr\n    .map(\n      category =>\n        `<div class=\"select__item\">${category.replace(/_/g, ' ')}</div>`\n    )\n    .join('');\n}\n\n// !------------------- SELECT JS -----------------!\\\\\nlet select = function () {\n  let selectHeader = document.querySelectorAll('.select__header');\n  let selectItem = document.querySelectorAll('.select__item');\n\n  selectHeader.forEach(item => {\n    item.addEventListener('click', selectToggle);\n  });\n\n  selectItem.forEach(item => {\n    item.addEventListener('click', selectChoose);\n  });\n\n  function selectToggle() {\n    this.parentElement.classList.toggle('is-active');\n  }\n\n  function selectChoose() {\n    let text = this.innerText,\n      select = this.closest('.select'),\n      currentText = select.querySelector('.select__current');\n    currentText.innerText = text;\n    select.classList.remove('is-active');\n  }\n};\n// ! ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n\n// ! local storage !\n// Записуємо вибрану категорію в локал сторедж і відмальовуємо товари:\nfunction handleCategory(event) {\n  const category = event.target.innerText\n    .replace(/ /g, '_')\n    .replace(/&/g, '%26');\n\n  const storedData = localStorage.getItem('filter');\n  // ! функція зміни категорії в local storage //\n  if (storedData) {\n    try {\n      // Розпакувати JSON-рядок у Javascript-об'єкт\n      const parsedData = JSON.parse(storedData);\n      // Змінити тільки потрібну властивість (наприклад, keyword)\n      if (event.target.innerText !== 'Show all') {\n        parsedData.category = `${category}`;\n        clean.disabled = false;\n      } else {\n        parsedData.category = null;\n\n        // перевірка чи інші фільтри пусті:\n         if (parsedData.keyword !== null) {\n           clean.disabled = false;\n         } else if (parsedData.byABC !== '') {\n           clean.disabled = false;\n         } else if (parsedData.byPopularity !== '') {\n           clean.disabled = false;\n         } else if (parsedData.byPrice !== '') {\n           clean.disabled = false;\n         } else {\n           clean.disabled = true;\n         }\n\n\n      } parsedData.page = 1;\n      // Зберегти оновлений об'єкт назад в localStorage\n      localStorage.setItem('filter', JSON.stringify(parsedData));\n    } catch (error) {\n      console.error('Error updating localStorage:', error);\n    }\n  }\n  pages(1);\n  fetchAndRender();\n  \n}\n\n//! Записуємо шаблонний масив в localStorage при завантаженні сторінки,\n//! якщо там пусто, якщо ні підставляємо значення в поля>\nconst filterObj = load('filter');\nfunction onLoad() {\n  const { keyword, category, page, limit, byABC, byPrice, byPopularity } =\n    getCategoriesFromLS();\n  // limit = Number(homManyLimit())\n  // console.log(limit)\n  const obj = {\n    keyword: keyword || null,\n    category: category || null,\n    page: page || 1, // Додавання значення за замовчуванням, якщо воно відсутнє\n    limit: limit || 6, // Додавання значення за замовчуванням, якщо воно відсутнє\n    byABC: byABC || '',\n    byPrice: byPrice || '',\n    byPopularity: byPopularity || '',\n  };\n  const value = obj;\n  const key = 'filter';\n  // console.log(value);\n  if (localStorage.getItem('filter')) {\n    if (filterObj.category !== null) {\n      refs.currentfilter.innerText = filterObj.category\n        .replace(/_/g, ' ')\n        .replace(/%26/g, '&');\n    }\n    if (filterObj.keyword !== null) {\n      // console.log(refs.form.elements.search);\n      refs.form.elements.search.value = filterObj.keyword;\n    }\n    if (filterObj.byABC) {\n      if (filterObj.byABC === 'false') {\n        refs.currentSort.innerText = 'Z to A';\n      }\n      if (filterObj.byABC === 'true') {\n        refs.currentSort.innerText = 'A to Z';\n      }\n    }\n    if (filterObj.byPrice) {\n      if (filterObj.byPrice === 'false') {\n        refs.currentSort.innerText = 'Expensive';\n      }\n      if (filterObj.byPrice === 'true') {\n        refs.currentSort.innerText = 'Cheap';\n      }\n    }\n    if (filterObj.byPopularity) {\n      if (filterObj.byPopularity === 'false') {\n        refs.currentSort.innerText = 'Popular';\n      }\n      if (filterObj.byPopularity === 'true') {\n        refs.currentSort.innerText = 'Not Popular';\n      }\n    }\n  } \n  save(key, value);\n  pages();\n  \n}\nonLoad();\n\n\n\n// !^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n// !------------------- Sort JS Markup-----------------!\\\\\n\nlet sort = function () {\n  let sortHeader = document.querySelectorAll('.sort-header');\n  let sortItem = document.querySelectorAll('.sort-item');\n\n  sortHeader.forEach(item => {\n    item.addEventListener('click', sortToggle);\n  });\n\n  sortItem.forEach(item => {\n    item.addEventListener('click', sortChoose);\n  });\n\n  function sortToggle() {\n    this.parentElement.classList.toggle('is-active');\n  }\n\n  function sortChoose() {\n    let text = this.innerText,\n      sort = this.closest('.sort'),\n      currentText = sort.querySelector('.sort-current');\n    currentText.innerText = text;\n    sort.classList.remove('is-active');\n  }\n};\nsort();\n// !^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n\n// ! -------------- SORT JS Work --------------------\nrefs.sort.addEventListener('click', handleSort);\n\nfunction handleSort(event) {\n  const sortType = event.target.innerText;\n\n  const storedData = localStorage.getItem('filter');\n\n  try {\n    const parsedData = JSON.parse(storedData);\n    if (sortType === 'A to Z') {\n      parsedData.byPrice = '';\n      parsedData.byPopularity = '';\n      parsedData.byABC = '';\n      const updatedData = parsedData;\n      save('filter', updatedData);\n      fetchAndRender();\n    \n    } else if (sortType === 'Z to A') {\n      parsedData.byPrice = '';\n      parsedData.byPopularity = '';\n      parsedData.byABC = 'false';\n      const updatedData = parsedData;\n      save('filter', updatedData);\n      fetchAndRender();\n      clean.disabled = false;\n    } else if (sortType === 'Cheap') {\n      parsedData.byABC = '';\n      parsedData.byPopularity = '';\n      parsedData.byPrice = 'true';\n      const updatedData = parsedData;\n      save('filter', updatedData);\n      fetchAndRender();\n      clean.disabled = false;\n    } else if (sortType === 'Expensive') {\n      parsedData.byABC = '';\n      parsedData.byPopularity = '';\n      parsedData.byPrice = 'false';\n      const updatedData = parsedData;\n      save('filter', updatedData);\n      fetchAndRender();\n      clean.disabled = false;\n    } else if (sortType === 'Popular') {\n      parsedData.byABC = '';\n      parsedData.byPrice = '';\n      parsedData.byPopularity = 'false';\n      const updatedData = parsedData;\n      save('filter', updatedData);\n      fetchAndRender();\n      clean.disabled = false;\n    } else if (sortType === 'Not Popular') {\n      parsedData.byABC = '';\n      parsedData.byPrice = '';\n      parsedData.byPopularity = 'true';\n      const updatedData = parsedData;\n      save('filter', updatedData);\n      fetchAndRender();\n      clean.disabled = false;\n    } else if (sortType === 'Reset Sort') {\n      parsedData.byPrice = '';\n      parsedData.byPopularity = '';\n      parsedData.byABC = '';\n      const updatedData = parsedData;\n      save('filter', updatedData);\n      fetchAndRender();\n\n      if (parsedData.keyword !== null) {\n        clean.disabled = false;\n      } else if (parsedData.category !== null) {\n        clean.disabled = false;\n      } else {\n        clean.disabled = true;\n      }\n    } \n  } catch (error) {\n    console.error('Error updating localStorage:', error);\n  }\n}\n// !^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n// ! Clean all filters\n\nconst clean = document.querySelector('.clean-button');\n\nclean.addEventListener('click', cleanFilters)\n\nconst storedData = localStorage.getItem('filter');\nconst parsedData = JSON.parse(storedData);\n  \nfunction cleanFilters() {\n  parsedData.page = 1;\n  parsedData.keyword = null;\n  parsedData.category = null;\n  parsedData.byPrice = '';\n  parsedData.byPopularity = '';\n  parsedData.byABC = '';\n  const updatedData = parsedData;\n  refs.currentSort.innerText = 'A to Z';\n  refs.currentfilter.innerText = 'Categories';\n  refs.form.reset();\n  save('filter', updatedData);\n  fetchAndRender();\n  clean.disabled = true;\n}\n\ncleanActivation();\nfunction cleanActivation() {\n  // перевіряємо чи активувати кнопку Clean\n  if (parsedData.keyword !== null) {\n    clean.disabled = false;\n  } else if (parsedData.byABC !== '') {\n    clean.disabled = false;\n  } else if (parsedData.byPopularity !== '') {\n    clean.disabled = false;\n  } else if (parsedData.byPrice !== '') {\n    clean.disabled = false;\n  } else if (parsedData.category !== null) {\n    clean.disabled = false;\n  } else {\n    clean.disabled = true;\n  }\n}\n\n","import { Notify } from \"notiflix\";\nimport {\n    foodInfo,\n    fetchAndRender,\n    fetchFoodCategory,\n    getCategoriesFromLS,\n    KEY_CATEGORY,\n    renderFoodItems,\n} from './products';\nimport { funcPagination, loadMoreTrendMoves, pages } from './pagination.js';\n// import { Input } from \"postcss\";\n\nconst clean = document.querySelector('.clean-button');\nconst form = document.querySelector('#search');\n// const input = document.querySelector('.search-input')\nlet timeoutId; // Змінна для зберігання ідентифікатора таймаута\n\n// Додавання слухача подій до форми\n\nform.addEventListener('input', handleInputOrSubmit);\nform.addEventListener('submit', handleInputOrSubmit);\n\nfunction handleInputOrSubmit(event) {\n  event.preventDefault();\n  // Введене значення не реагує на пробіли\n  const keyword = form.elements.search.value.trim();\n  const storedData = localStorage.getItem('filter');\n\n  // Визначення типу події\n  if (event.type === 'input' || event.type === 'submit') {\n    clearTimeout(timeoutId);\n    timeoutId = setTimeout(() => {\n      updateLocalStorage(keyword, storedData);\n      fetchAndRender();\n      pages(1)\n    }, 1000);\n  }\n}\n\nfunction updateLocalStorage(keyword, storedData) {\n  if (storedData) {\n    try {\n      const parsedData = JSON.parse(storedData);\n      if (keyword === '') {\n        parsedData.keyword = null;\n        // перевірка чи інші фільтри пусті:\n        if (parsedData.category !== null) {\n          clean.disabled = false;\n        } else if (parsedData.byABC !== '') {\n          clean.disabled = false;\n        } else if (parsedData.byPopularity !== '') {\n          clean.disabled = false;\n        } else if (parsedData.byPrice !== '') {\n          clean.disabled = false;\n        } else {\n          clean.disabled = true;\n        }\n      } else {\n        parsedData.keyword = `${keyword}`;\n        clean.disabled = false;\n      }\n      parsedData.page = 1;\n      localStorage.setItem('filter', JSON.stringify(parsedData));\n    } catch (error) {\n      console.error('Error updating localStorage:', error);\n    }\n  }\n}","import {\n  KEY_CART,\n  addToCart,\n} from '/js/cart-localestorage.js';\nimport axios from 'axios';\nimport iconsSvg from '/img/icons.svg';\nimport {updateCartNumber} from './header';\nimport {\n  foodInfo,\n  fetchAndRender,\n  fetchFoodCategory,\n  getCategoriesFromLS,\n  KEY_CATEGORY,\n  renderFoodItems,\n  homManyLimit,\n  add,\n  // handleButtonClick,\n  checkId,\n} from './products.js';\nimport { openModalProduct } from '/js/modalwindow';\n\nasync function fetchPopularFood() {\n  // Показываем лоадер перед запросом\n  document.getElementById('overlay').style.display = 'flex';\n\n  const url = `https://food-boutique.b.goit.study/api/products/popular`;\n  try {\n    const responce = await axios.get(url);\n    return responce.data;\n  } catch (error) {\n    throw error;\n  } finally {\n    // Скрываем лоадер после выполнения запроса\n    document.getElementById('overlay').style.display = 'none';\n  }\n}\n \nconst popularList = document.querySelector('.popular-list');\nlet prodList = [];\n\nasync function createMarkup() {\n  const storage = localStorage.getItem(KEY_CART);\n  const lim = 5;\n  try {\n    let responce = await fetchPopularFood();\n    prodList = responce.slice(0, lim);\n    const createProducts = prodList\n      .map(({ img, name, popularity, category, size, _id }) => {\n\n        const isIDInLocaleStorage = storage\n        ? JSON.parse(storage).some(item => item._id === _id)\n        : false;\n      const svgHref = isIDInLocaleStorage\n        ? `${iconsSvg}#icon-cart`\n        : `${iconsSvg}#icon-shopping-cart`;\n\n        const cleanedCategory = category.replace(/_/g, ' ');\n        return `<li class=\"item-popular\" data-id=\"${_id}\">\n        <div class=\"background-img-popular\">\n            <img src=\"${img}\" alt=\"\" class=\"img-popular\" loading=\"lazy\" />\n        </div>\n        <div class=\"popular-wrap\">\n        <h3 class=\"popular-name\">${name}</h3>\n        <div class=\"popular-info\">\n            <p class=\"popular-info-items\">\n                Category: <b class=\"value-popular\">${cleanedCategory}</b>\n            </p>\n            <p class=\"popular-info-items\">Size: <b class=\"value-popular\">${size}</b></p>\n            <p class=\"popular-info-items\">Popularity: <b class=\"value-popular\">${popularity}</b></p>\n        </div>\n        </div>\n            <button class=\"popularBtn\" aria-label=\"Add basket\" data-_id=\"${_id}\" ${\n              isIDInLocaleStorage ? 'disabled' : ''\n            }>\n                <svg class=\"icon-popular\" data-_id=\"${_id}\" width=\"12\" height=\"12\">\n                    <use class=\"use-popular\" data-_id=\"${_id}\"\n                      href=\"${svgHref}\"\n                    ></use>\n                </svg>\n            </button>\n    </li>`;\n      })\n      .join('');\n\n    popularList.insertAdjacentHTML('beforeend', createProducts);\n  } catch (error) {\n    console.error(error);\n  }\n}\n\nwindow.addEventListener('load', createMarkup);\n\nconst linkBag = document.querySelector('.popular-list');\n\nlinkBag.addEventListener('click', handleButtonClick);\n\n\n\nfunction handleButtonClick(event) {\n  // debugger;\n  let noButton = 0;\n  // отримуємо елемент, на якому відбувся клік\n  const clickedElement = event.target;\n  // Знаходимо найближчий батьківський елемнт типу button\n  const closestButton = clickedElement.closest('button');\n  // перевіряємо чи знайдено кнопку\n  if (closestButton) {\n    // Знаходимо найближчий батьківський елемент li\n    const closestLi = closestButton.closest('li');\n    // перевіряємо чи знайдено li\n    if (closestLi) {\n      // отримуємо значення data-id з li\n      const dataId = closestLi.dataset.id;\n      // знаходимо продукт за id в масиві prodList\n      const clickedProduct = prodList.find(product => product._id === dataId);\n      checkId(closestLi);\n      // перевірка чи знайдено продукт\n      if (clickedProduct) {\n        // виклик функції на додавання в localeStorage\n        noButton = 1;\n        add(clickedProduct, prodList);\n      }\n    }\n    // знаходимо елемент use в середині кнопки\n    // const svg = closestButton.querySelector('.icon-pl use');\n    // зміна svg\n    // svg.setAttribute('href', `${iconSvg}#icon-cart`);\n    // btn off\n    closestButton.setAttribute('disabled', true);\n  }\n  const clickedLi = event.target.closest('li');\n  if (clickedLi && !noButton) {\n    const clickedId = clickedLi.dataset.id;\n    openModalProduct(clickedId);\n  }\n}\n\n\n// let btn;\n\n// function addCart(evt) {\n//   btn = evt.target.closest('.popularBtn');\n//   if (evt.target.closest('.popularBtn')) {\n//     addToCart(evt, prodList);\n//   }\n\n//   const svg = btn.querySelector('.icon-popular use');\n//   svg.setAttribute('href', `${iconsSvg}#icon-cart`);\n//   btn.setAttribute('disabled', true);\n//   btn.style.cursor = 'auto';\n//   btn.style.background = '#6d8434';\n//   btn.style.border = '#6d8434';\n\n//   updateCartNumber();\n// }\n","import { KEY_CART, addToCart } from '/js/cart-localestorage.js';\nimport axios from 'axios';\nimport iconsSvg from '/img/icons.svg';\nimport {\n  foodInfo,\n  fetchAndRender,\n  fetchFoodCategory,\n  getCategoriesFromLS,\n  KEY_CATEGORY,\n  renderFoodItems,\n  homManyLimit,\n  checkId,\n  add,\n} from './products.js';\nimport { openModalProduct } from '/js/modalwindow';\n\nasync function fetchDiscontFood() {\n  // Показываем лоадер перед запросом\n  document.getElementById('overlay').style.display = 'flex';\n\n  const url = `https://food-boutique.b.goit.study/api/products/discount`;\n  try {\n    const responce = await axios.get(url);\n    return responce.data;\n  } catch (error) {\n    throw error;\n  } finally {\n    // Скрываем лоадер после выполнения запроса\n    document.getElementById('overlay').style.display = 'none';\n  }\n}\n\nconst discountList = document.querySelector('.discount-list');\nlet prodList = [];\n\nasync function createMarkup() {\n  const storage = localStorage.getItem(KEY_CART);\n  const lim = 2;\n  try {\n    let responce = await fetchDiscontFood();\n    prodList = responce.slice(0, lim);\n\n    const createProducts = prodList\n      .map(({ _id, name, img, price }) => {\n        const isIDInLocaleStorage = storage\n          ? JSON.parse(storage).some(item => item._id === _id)\n          : false;\n        const svgHref = isIDInLocaleStorage\n          ? `${iconsSvg}#icon-cart`\n          : `${iconsSvg}#icon-shopping-cart`;\n\n        return `<li class=\"discount-item\" data-id=\"${_id}\">\n           <svg class=\"icon-discount\" width=\"64\" height=\"64\">\n                  <use href=\"${iconsSvg}#icon-discount\"></use>\n                </svg>\n    <div class=\"discount-item-img\">\n      <img class=\"discount-img\"  src=\"${img}\" alt=\"Product\" loading=\"lazy\" />\n    </div>\n    <div class=\"discont-info\">\n      <p class=\"info-title\">${name}</p>\n      <div class=\"discont-info-dop\">\n        <p class=\"info-price\">$${price}</p>\n        <div class=\"info-div\">\n          <button class=\"info-title-link\" aria-label=\"Price\" data-_id=\"${_id}\">\n            <svg class=\"img-svg-osnova\" data-_id=\"${_id}\" width=\"18\" height=\"18\">\n              <use class=\"use\" data-_id=\"${_id}\"\n                href=\"${svgHref}\"\n              ></use>\n            </svg>\n          </button>\n        </div>\n      </div>\n    </div>\n  </li>`;\n      })\n      .join('');\n\n    discountList.insertAdjacentHTML('beforeend', createProducts);\n    const linkBag = document.querySelector('.discount-list');\n\n    linkBag.addEventListener('click', handleButtonClick);\n  } catch (error) {\n    console.error(error);\n  }\n}\n\nwindow.addEventListener('load', createMarkup);\n\nfunction handleButtonClick(event) {\n  // debugger;\n  let noButton = 0;\n  // отримуємо елемент, на якому відбувся клік\n  const clickedElement = event.target;\n  // Знаходимо найближчий батьківський елемнт типу button\n  const closestButton = clickedElement.closest('button');\n  // перевіряємо чи знайдено кнопку\n  if (closestButton) {\n    // Знаходимо найближчий батьківський елемент li\n    const closestLi = closestButton.closest('li');\n    // перевіряємо чи знайдено li\n    if (closestLi) {\n      // отримуємо значення data-id з li\n      const dataId = closestLi.dataset.id;\n      // знаходимо продукт за id в масиві prodList\n      const clickedProduct = prodList.find(product => product._id === dataId);\n      checkId(closestLi);\n      // перевірка чи знайдено продукт\n      if (clickedProduct) {\n        // виклик функції на додавання в localeStorage\n        noButton = 1;\n        add(clickedProduct, prodList);\n      }\n    }\n    // знаходимо елемент use в середині кнопки\n    // const svg = closestButton.querySelector('.icon-pl use');\n    // зміна svg\n    // svg.setAttribute('href', `${iconSvg}#icon-cart`);\n    // btn off\n    closestButton.setAttribute('disabled', true);\n  }\n  const clickedLi = event.target.closest('li');\n  if (clickedLi && !noButton) {\n    const clickedId = clickedLi.dataset.id;\n    openModalProduct(clickedId);\n  }\n}\n\n// let btn;\n\n// function addCart(evt) {\n//   btn = evt.target.closest('.info-title-link');\n//   if (evt.target.closest('.info-title-link')) {\n//     addToCart(evt, prodList);\n//   }\n//   const svg = btn.querySelector('.img-svg-osnova use');\n//   svg.setAttribute('href', `${iconsSvg}#icon-cart`);\n//   btn.setAttribute('disabled', true);\n//   btn.style.cursor = 'auto';\n// }\n","import throttle from 'lodash.throttle';\n\n// Отримання посилання на елемент кнопки прокрутки вгору за класом CSS '.scroll-up'\nconst ScrollUpBtn = document.querySelector('.scroll-up');\n\n// Додаємо слухача подій 'scroll' на вікно і викликаємо функцію scrollTracker з обмеженням через throttle на 400 мс\ndocument.addEventListener('scroll', throttle(scrollTracker, 400));\n\n// Оголошення функції scrollTracker, яка відслідковує прокрутку сторінки\nfunction scrollTracker() {\n  // Отримання відстані, на яку сторінка була прокручена від верху\n  const scrolled = window.scrollY;\n\n  // Отримання висоти видимої частини вікна браузера\n  const coords = document.documentElement.clientHeight;\n\n  // Перевірка, чи сторінка прокручена на більшу відстань, ніж висота видимої частини вікна\n  if (scrolled > coords) {\n    // Якщо умова виконується, додаємо клас 'scroll-up-is-hidden', щоб приховати кнопку прокрутки вгору\n    ScrollUpBtn.classList.add('scroll-up-is-hidden');\n  } else {\n    // Якщо умова не виконується, видаляємо клас 'scroll-up-is-hidden', щоб показати кнопку прокрутки вгору\n    ScrollUpBtn.classList.remove('scroll-up-is-hidden');\n  }\n}\n"],"names":["BASE_URL","CATEGORIES_ENDPOINT","PRODUCTS_ENDPOINT","PRODUCT_ENDPOINT","POPULAR_PRODUCTS_ENDPOINT","DISCOUNTED_PRODUCTS_ENDPOINT","SUBSCRIBE_ENDPOINT","ORDERS_ENDPOINT","api","axios","Api","keyword","category","page","limit","sortBy","id","email","cart","products","productId","amount","modalBackground","modal","openModalProduct","icons","modalProduct","renderModalCard","addCart","removeCart","i","cartArr","closeModalHandler","clickOnBackdrop","escapeModalHandler","error","img","name","size","popularity","desc","price","product","KEY_CART","updateCartNumber","addCartSyncButtons","removeCartSyncButtons","idPorduct","allPopular","allDiscount","allProducts","elem","btn","iconSvg","target","modalContainer","key","FILTER","refs","container","itemsPerPage","visiblePage","pageOrigin","storeData","storedData","parsedData","funcPagination","totalPage","options","Pagination","loadMoreTrendMoves","event","fetchAndRender","scroll","pages","rect","x","y","foodInfo","setLimit","categoryInfo","fetchFoodCategory","homManyLimit","response","renderFoodItems","storage","createMessage","createElement","_id","is10PercentOff","cleanedCategory","isIDInLocaleStorage","item","svgDisc","svgHref","handleButtonClick","noButton","closestButton","closestLi","dataId","clickedProduct","checkId","add","clickedLi","clickedId","arr","findP","KEY_CATEGORY","getCategoriesFromLS","parseData","categories","byABC","byPrice","byPopularity","params","url","storedLimit","parseLimit","currentWindowWidth","resizeTimer","thresholdWidths","resizeWidth","newWindowWidth","thresholdOfSwitches","oldWidth","newWidth","threshold","fetchCategories","data","markup","createSelectorMarkup","select","handleCategory","Notiflix","selectHeader","selectItem","selectToggle","selectChoose","text","currentText","clean","filterObj","load","onLoad","value","save","sort","sortHeader","sortItem","sortToggle","sortChoose","handleSort","sortType","cleanFilters","updatedData","cleanActivation","form","timeoutId","handleInputOrSubmit","updateLocalStorage","fetchPopularFood","popularList","prodList","createMarkup","lim","createProducts","iconsSvg","linkBag","fetchDiscontFood","discountList","ScrollUpBtn","throttle","scrollTracker","scrolled","coords"],"mappings":"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"}